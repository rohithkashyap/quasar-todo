"use strict";(globalThis["webpackChunkquasar_todo"]=globalThis["webpackChunkquasar_todo"]||[]).push([[8],{3008:(e,t,o)=>{o.r(t),o.d(t,{default:()=>N});var a=o(9835),r=o(6970),s=o(1957);const n={key:1},l={class:"list scroll"},i={key:0,class:"absolute-center column"},c=(0,a._)("p",{color:"primary"},"No Tasks!",-1),u={key:2,class:"absolute-center column"},d=(0,a._)("div",{class:"text-h5 text-center"},"Welcome!",-1),m=(0,a._)("div",{class:"text-h6 text-center"},"Please login to continue",-1);function h(e,t,o,h,p,g){const w=(0,a.up)("q-tab"),y=(0,a.up)("q-icon"),v=(0,a.up)("q-tabs"),k=(0,a.up)("q-checkbox"),T=(0,a.up)("q-item-section"),f=(0,a.up)("q-input"),b=(0,a.up)("q-item-label"),C=(0,a.up)("q-btn"),Y=(0,a.up)("q-item"),D=(0,a.up)("q-list"),_=(0,a.up)("q-footer"),U=(0,a.up)("q-card-section"),q=(0,a.up)("q-separator"),W=(0,a.up)("q-card-actions"),Z=(0,a.up)("q-card"),Q=(0,a.up)("q-page"),M=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(Q,{class:"column"},{default:(0,a.w5)((()=>[h.loggedIn?((0,a.wg)(),(0,a.j4)(v,{key:0,modelValue:h.activeCategory,"onUpdate:modelValue":t[0]||(t[0]=e=>h.activeCategory=e),class:"bg-primary text-white shadow-2","mobile-arrows":"","outside-arrows":"","no-caps":""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.categories,((e,t)=>((0,a.wg)(),(0,a.j4)(w,{name:e.name,label:e.name,key:e.name,onMousedown:e=>h.startCategoryTimer(t),onTouchstart:e=>h.startCategoryTimer(t),onMouseup:h.cancelCategoryTimer,onTouchend:h.cancelCategoryTimer},null,8,["name","label","onMousedown","onTouchstart","onMouseup","onTouchend"])))),128)),(0,a.Wm)(w,{onClick:h.addNewTab},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{name:"add"})])),_:1},8,["onClick"])])),_:1},8,["modelValue"])):(0,a.kq)("",!0),h.loggedIn?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",l,[(0,a.Wm)(D,{bordered:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.taskList,((e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(Y,{key:e.title,clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(T,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{modelValue:e.completed,"onUpdate:modelValue":t=>e.completed=t,class:"no-pointer-event",color:"primary",onClick:e=>h.completeTask(t)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1024),(0,a.Wm)(T,{class:(0,r.C_)({completed:e.completed})},{default:(0,a.w5)((()=>[e.editing&&!e.completed?((0,a.wg)(),(0,a.j4)(f,{key:0,modelValue:e.title,"onUpdate:modelValue":t=>e.title=t,onKeyup:(0,s.D2)((e=>h.saveTask(t)),["enter"]),onBlur:e=>h.saveTask(t),dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeyup","onBlur"])):((0,a.wg)(),(0,a.j4)(b,{key:1,onClick:e=>h.handleTodoClick(t),onMousedown:e=>h.startTodoTimer(t,e),onTouchstart:e=>h.startTodoTimer(t,e),onMouseup:h.cancelTodoTimer,onTouchend:h.cancelTodoTimer,class:(0,r.C_)({"cursor-pointer":!e.completed})},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.title),1)])),_:2},1032,["onClick","onMousedown","onTouchstart","onMouseup","onTouchend","class"]))])),_:2},1032,["class"]),e.completed?((0,a.wg)(),(0,a.j4)(T,{key:0,side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{flat:"",onClick:e=>h.deleteTask(t),icon:"delete"},null,8,["onClick"])])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024)),[[M]]))),128))])),_:1})]),h.taskList.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(y,{name:"check",color:"positive",size:"xl"}),c])),(0,a.Wm)(_,{elevated:"",class:"bg-dark text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{onKeyup:(0,s.D2)(h.addTask,["enter"]),outlined:"",clearable:"","clear-icon":"close",modelValue:h.newTask,"onUpdate:modelValue":t[1]||(t[1]=e=>h.newTask=e),placeholder:"Add a task"},{append:(0,a.w5)((()=>[(0,a.Wm)(C,{onClick:h.addTask,round:"",dense:"",flat:"",icon:"add"},null,8,["onClick"])])),_:1},8,["onKeyup","modelValue"])])),_:1})])):((0,a.wg)(),(0,a.iD)("div",u,[(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[d,m])),_:1}),(0,a.Wm)(q),(0,a.Wm)(W,{vertical:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{onClick:h.login,color:"primary",label:"Login via Google","no-caps":""},null,8,["onClick"])])),_:1})])),_:1})]))])),_:1})}o(8727),o(2166);var p=o(499),g=o(9302),w=o(8761),y=o.n(w);class v{constructor(e,t,o,a,r){y()(this,"id",void 0),y()(this,"createdDate",void 0),y()(this,"title",void 0),y()(this,"completed",void 0),y()(this,"notes",void 0),this.id=e,this.createdDate=t,this.title=o,this.completed=a,this.notes=r}}class k{constructor(e,t){y()(this,"name",void 0),y()(this,"createdDate",void 0),this.name=e,this.createdDate=t}}const T={toFirestore(e){return{createdDate:e.createdDate,title:e.title,completed:e.completed,notes:e.notes}},fromFirestore(e){const t=e.data();return new v(e.id,t.createdDate,t.title,t.completed,t.notes)}},f={toFirestore(e){return{name:e.name,createdDate:e.createdDate}},fromFirestore(e){const t=e.data();return new k(t.name,t.createdDate)}},b=["Nice one! 😎","Bravo! 👏","You nailed it! 🎯","Way to go! 🙌","Incredible work! 🌟","Boom! 💥","Mission accomplished! ✅","You're on fire! 🔥","Impressive stuff! 👍","That's how it's done! 💪","Huzzah! 🎉","You're crushing it! 🚀","You're a superstar! ⭐","A round of applause for you! 👏👏","You're on a roll! 🤩","Absolutely smashing! 💥","You're unstoppable! 🌟","Well done, champ! 🏆","Top-notch job! 👌","You aced it! 🙌","Fantastic work! 🎉","You're a wizard! 🧙‍♂️","Bravo, maestro! 🎶","You're a legend! 🌟","You've got the magic touch! ✨","You knocked it out of the park! ⚾","You deserve a standing ovation! 👏👏👏","Kudos to you! 🙌","Outstanding performance! 🌟","Mission success! 🚀","You're a rockstar! 🎸","You did it in style! 😎","You're a superhero! 🦸‍♂️","You're a genius! 🧠","You're a pro! 💼","You make it look easy! 😄","Absolutely splendid! 👌","You've got the Midas touch! 🌟","You're a boss! 💼","You're a force to be reckoned with! 💪","You're a shining star! ✨","You're a magician! 🎩","You crushed it like a bug! 🐞","You're a trailblazer! 🚀","You're a mastermind! 🧠","You hit the jackpot! 💰","You're a top-tier performer! 🌟","You're a dynamo! ⚡","You deserve a gold medal! 🥇","You're the cream of the crop! 🥛"];var C=o(4987),Y=o(7656),D=o(6144);const _={setup(){const e=(0,p.iH)(""),t=(0,p.iH)([]),o=(0,p.iH)([]),r=(0,p.iH)(""),s=(0,p.iH)("");let n=null,l=null;const i=(0,g.Z)(),c=(0,D.L)(),u=(0,a.Fl)((()=>c.isAuthenticated));let d=null,m=null;C.auth.onAuthStateChanged((async e=>{if(e){const o=e=>new Promise((t=>setTimeout(t,e)));let a=3,r=0;while(r<a)try{const t=e.uid,o=(0,Y.hJ)(C.db,"users",t,"categories"),a=await(0,Y.PL)(o);if(a.empty){await(0,Y.pl)((0,Y.JU)(C.db,"users",t),{});const e=(0,Y.JU)(o,"My list"),a=new k("My list",Date.now());await(0,Y.pl)(e,f.toFirestore(a));const r=(0,Y.hJ)(e,"todos"),s=new v("123",Date.now(),"My first todo",!1,"");await(0,Y.ET)(r,T.toFirestore(s)),await(0,Y.pl)(r,{})}h();break}catch(t){if(r++,r===a)A("Something went wrong. Please refresh or restart.");else{const e=1e3;console.log(`Retrying (${r}/${a}) in ${e}ms...`),await o(e)}}}else w(),y()}));const h=()=>{try{const e=C.auth.currentUser.uid,t=(0,Y.IO)((0,Y.hJ)(C.db,"users",e,"categories"),(0,Y.Xo)("createdDate"));n=(0,Y.cf)(t,(e=>{const t=[];e.forEach((e=>{const o=f.fromFirestore(e);t.push(o)})),o.value=t,r.value=o.value.at(0).name,s.value=r.value}))}catch(e){A("Cannot listen to changes from DB.")}},w=()=>{n&&(n(),n=null)},y=()=>{l&&(l(),l=null)};(0,a.Ah)((()=>{w(),y()})),(0,a.YP)(r,((e,o)=>{if(l&&(l(),l=null),e){s.value=o;const a=C.auth.currentUser.uid,r=(0,Y.IO)((0,Y.hJ)(C.db,"users",a,"categories",e,"todos"),(0,Y.Xo)("completed"),(0,Y.Xo)("createdDate"));l=(0,Y.cf)(r,(e=>{t.value=e.docs.map((e=>T.fromFirestore(e)))}))}})),(0,a.Ah)((()=>{n&&n(),l&&l()}));const _=async()=>{const e=(0,D.L)();try{await e.signInWithRedirect()}catch(t){A("Could not sign in. "+t)}},U=async()=>{if(0!=e.value.length&&null!=r.value){try{const t=C.auth.currentUser.uid,o=(0,Y.hJ)(C.db,"users",t,"categories",r.value,"todos"),a=new v("123",Date.now(),e.value,!1,"");await(0,Y.ET)(o,T.toFirestore(a))}catch(t){A(t)}L("Todo added!"),e.value=""}},q=async e=>{const o=t.value.at(e).id;try{const e=C.auth.currentUser.uid,t=(0,Y.JU)(C.db,"users",e,"categories",r.value,"todos",o);await(0,Y.oe)(t)}catch(a){A(a)}},W=async e=>{const o=C.auth.currentUser.uid,a=(0,Y.JU)(C.db,"users",o,"categories",r.value,"todos",t.value.at(e).id);let s=t.value.at(e).completed;try{await(0,Y.r7)(a,{completed:s}),s&&L(b[Math.floor(Math.random()*b.length)])}catch(n){A(n)}},Z=(e,t)=>{t.preventDefault(),m=setTimeout((()=>{J(e)}),1e3)},Q=e=>{m&&M(),t.value.at(e).completed=!t.value.at(e).completed,W(e)},M=()=>{clearTimeout(m),m=null},J=e=>{t.value[e].editing=!0},F=async e=>{t.value[e].editing=!1;const o=C.auth.currentUser.uid,a=(0,Y.JU)(C.db,"users",o,"categories",r.value,"todos",t.value.at(e).id);try{await(0,Y.r7)(a,{title:t.value.at(e).title})}catch(s){A(s)}},V=async e=>{try{const t=C.auth.currentUser.uid,o=(0,Y.hJ)(C.db,"users",t,"categories"),a=(0,Y.JU)(o,e),s=new k(e,Date.now());await(0,Y.pl)(a,f.toFirestore(s)),r.value=e}catch(t){A("Error adding new category: "+t)}},x=async e=>{const t=C.auth.currentUser.uid,o=(0,Y.JU)(C.db,"users",t,"categories",e);try{const e=await(0,Y.QT)(o);return e.exists()}catch(a){return A("Could not check if category exists. Please try again later. "+a),!1}},I=()=>{const e=prompt("Enter a name for the new category");e?x(e).then((t=>{t?(A("Category already exists!"),r.value=s.value):V(e)})).catch((e=>{A("Error checking category existence: "+e),r.value=s.value})):r.value=s.value},A=e=>{i.notify({message:"Failed! "+e,color:"red",icon:"error_outline",position:"top-right"})},L=e=>{i.notify({message:e,color:"green",icon:"published_with_changes",position:"top-right"})},j=e=>{d=setTimeout((()=>{const t=o.value.at(e).name,a=window.confirm(`Are you sure you want to delete the category "${t}"? All todos under this category will be deleted forever!`);if(a){const e=C.auth.currentUser.uid;H(e,t).then((()=>{L("Deleted category and all todos in it.")})).catch((e=>{A("Error deleting category: "+e)}))}}),1e3)},E=()=>{clearTimeout(d),d=null},H=async(e,t)=>{const o=(0,Y.JU)(C.db,"users",e,"categories",t),a=(0,Y.hJ)(o,"todos");await P(a),await(0,Y.oe)(o)},P=async e=>{const t=await(0,Y.PL)(e);t.forEach((async e=>{await(0,Y.oe)(e.ref)}))};return{newTask:e,taskList:t,categories:o,activeCategory:r,loggedIn:u,login:_,addTask:U,deleteTask:q,completeTask:W,notify:i,editTask:J,saveTask:F,addNewTab:I,startCategoryTimer:j,cancelCategoryTimer:E,startTodoTimer:Z,cancelTodoTimer:M,handleTodoClick:Q}}};var U=o(1639),q=o(9885),W=o(8450),Z=o(900),Q=o(2857),M=o(3246),J=o(490),F=o(6749),V=o(1006),x=o(5555),I=o(3115),A=o(4455),L=o(1378),j=o(4458),E=o(3190),H=o(926),P=o(1821),B=o(1136),K=o(9984),z=o.n(K);const S=(0,U.Z)(_,[["render",h]]),N=S;z()(_,"components",{QPage:q.Z,QTabs:W.Z,QTab:Z.Z,QIcon:Q.Z,QList:M.Z,QItem:J.Z,QItemSection:F.Z,QCheckbox:V.Z,QInput:x.Z,QItemLabel:I.Z,QBtn:A.Z,QFooter:L.Z,QCard:j.Z,QCardSection:E.Z,QSeparator:H.Z,QCardActions:P.Z}),z()(_,"directives",{Ripple:B.Z})}}]);